{% extends "base.html" %}

{% block content %}
{{ super() }}

<div id="password-gate" style="
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: #1e1e1e;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
">
  <div style="
    background: #2d2d2d;
    padding: 48px;
    border-radius: 16px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    max-width: 400px;
    width: 90%;
  ">
    <h2 style="color: #fff; margin: 0 0 8px 0; font-size: 24px;">ALGH</h2>
    <p style="color: #aaa; margin: 0 0 24px 0; font-size: 14px;">Content Pipeline Automation</p>
    <input
      id="password-input"
      type="password"
      placeholder="Enter password"
      style="
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #555;
        border-radius: 8px;
        background: #1e1e1e;
        color: #fff;
        font-size: 16px;
        outline: none;
        box-sizing: border-box;
        margin-bottom: 16px;
      "
    />
    <button
      id="password-submit"
      style="
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 8px;
        background: #7c4dff;
        color: #fff;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
      "
    >Enter</button>
    <p id="password-error" style="color: #ff5252; margin: 12px 0 0 0; font-size: 13px; display: none;">Incorrect password</p>
  </div>
</div>

<script>
(function() {
  var gate = document.getElementById('password-gate');
  var input = document.getElementById('password-input');
  var btn = document.getElementById('password-submit');
  var err = document.getElementById('password-error');
  var key = 'algh_auth';

  if (sessionStorage.getItem(key) === 'true') {
    gate.style.display = 'none';
    return;
  }

  function tryPassword() {
    if (input.value === 'algh') {
      sessionStorage.setItem(key, 'true');
      gate.style.display = 'none';
    } else {
      err.style.display = 'block';
      input.style.borderColor = '#ff5252';
      input.value = '';
    }
  }

  btn.addEventListener('click', tryPassword);
  input.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') tryPassword();
  });
  input.focus();
})();
</script>
{% endblock %}
